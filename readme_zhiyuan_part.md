## Disney 动态柱状图（Bar‑Chart Race）说明文档

### 简介

该示例基于 D3.js 实现了一个“迪士尼电影票房动态柱状图”可视化页面。展示从 1937 年到最近年度的前十名迪士尼电影票房排名，并提供：

* ▶️/⏸️ **播放/暂停** 按钮（大图标）
* 🕹️ **双滑块**：可分别设置动画的起始年份和结束年份
* 🔎 **鼠标悬停提示框**：展示电影中文名、上映日期、类型、分级、总票房、通胀后票房以及自定义简介

### 依赖

* [D3.js v6](https://d3js.org/)（页面中通过 CDN 引入）
* 本地 `disney_movies_total_gross_chinese_annotated.csv` 数据文件
* 大图标资源：

  * `play.png`（播放按钮）
  * `pause.png`（暂停按钮）

### 文件结构

```
├── index.html                # 上述示例代码
├── disney_movies_total_gross_chinese_annotated.csv  # 含注释字段的数据源
├── play.png                  # 播放按钮大图标
└── pause.png                 # 暂停按钮大图标
```

### 使用方式

1. 将所有文件放置在同一目录下。
2. 启动本地 HTTP 服务器（如：`python -m http.server 8000`）。
3. 在浏览器中打开 `http://localhost:8000/index.html`。
4. 点击 ▶️ 按钮开始动画，或使用滑块手动跳转到指定年份。

### 主要功能

* **动态柱状图**：每秒更新一次，自动播放至设定结束年份。
* **双滑块控制**：分别调整起始帧 (`Start Year`) 和结束帧 (`End Year`)，滑块下方实时显示最小/最大年份坐标。
* **提示框**：鼠标悬停时展示电影详细信息，支持自定义注释字段（`annotation`）。
* **颜色映射**：使用 D3 内置 Tableau10 色板，根据电影标题一致映射颜色。

### 配置说明

* **数据字段**：`csv` 中需包含以下列：

  * `movie_title`：电影中文名
  * `release_date`：上映日期（格式可被 `new Date()` 解析）
  * `total_gross`：总票房（需带 `$` 与千分隔符）
  * `inflation_adjusted_gross`：通胀后票房
  * `genre`、`MPAA_rating`、`annotation`：类型、分级、简介等自定义字段
* **样式调整**：在 `<style>` 中可自定义滑块宽度、字体大小、按钮图标尺寸等。
* **播放速度**：在 `start()` 函数中调整 `d3.interval` 的间隔值（默认 1000ms）。

### 扩展建议

* 增加**年份轴**中点坐标显示，可参考 `.slider-coords` 结构自行渲染更多刻度。
* 支持**响应式**布局：根据窗口宽度动态调整 SVG 尺寸与滑块长度。
* 添加**过滤器**：按类型或分级筛选影片列表。
* 支持**多语言**：将固定文本提取到配置对象或 JSON 文件中。

---

*作者：冯志远*
*日期：2025-05-21*
